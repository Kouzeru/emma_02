
<html>
<title>Insert / Delete</title>
<body>
<h1>Insert / Delete</h1>
<p>
Insert and Delete functions can be used after defining a program configuration. Both functions can only be used between (one of) the defined 'Code start' and '(Program) end' locations.
</p>
<h2>Insert</h2>
<p>
Pressing the 'Insert' button will insert one 'NOP', i.e instruction C4 when used on an address with code, otherwise a '0' will be inserted. 
</p>
<p>
The insert feature will check all code and data areas (defined in program configurations) for branches, branch data (see chapter 'Branch location') and LDL/RLDL instructions (see chapter 'LDL, LDV and RLDL instructions). All branches found that need to 'change' due to the insert instruction will be corrected. e.g. if an insert is done on hex 8002 in the code below:
<pre>
8000: BR <FONT COLOR="DARK ORCHID">03</FONT>
8002: NOP
8003: LDI 10
</pre>
it will change to:
<pre>
8000: BR <FONT COLOR="DARK ORCHID">04</FONT>
8002: NOP
8003: NOP
8004: LDI 10
</pre>
if however the insert is done on or after address hex 8003 the BR 03 will stay the same. 
</p>
<p>
If any short branch can NOT be changed due to the insert it will be changed to a long branch, e.g. if an insert is done on hex 8002 in the code below:
<pre>
8000: BR <FONT COLOR="DARK ORCHID">FF</FONT>
8002: NOP
8003: LDI 10
</pre>
it will change to:
<pre>
8000: LBR <FONT COLOR="DARK ORCHID">8101</FONT>
8003: NOP
8004: NOP
8005: LDI 10
</pre>
Note that the branch has changed to hex 8101 and NOT hex 8100 as an extra byte had to be inserted to fit the 3 byte long LBR instruction.
</p>
<p>
Not all short branches have equivalent long branch instructions (i.e. B1, B2 etc). If any of these branches cause a possible problem they will be listed in the 'message' area (just below the 'Command line input') as 'Check: address'.
</p>
<h2>Delete</h2>
<p>
Pressing the 'Delete' button will delete the current instruction or byte, one or more '0's will be stored just before the code or program end. 
</p>
<p>
The delete feature will check all code and data areas (defined in program configurations) for branches, branch data (see chapter 'Branch location') and LDL/RLDL instructions (see chapter 'LDL, LDV and RLDL instructions). All branches found that need to 'change' due to the delete instruction will be corrected. e.g. if a delete is done on hex 8002 in the code below:
<pre>
8000: BR <FONT COLOR="DARK ORCHID">04</FONT>
8002: NOP
8003: NOP
8004: LDI 10
</pre>
it will change to:
<pre>
8000: BR <FONT COLOR="DARK ORCHID">03</FONT>
8002: NOP
8003: LDI 10
</pre>
If any long branch can be changed to a short branch due to the delete it will be changed automatically, e.g. if a delete is done on hex 8003 in the code below:
<pre>
8000: LBR <FONT COLOR="DARK ORCHID">8100</FONT>
8003: NOP
8004: NOP
8005: LDI 10
</pre>
it will change to:
<pre>
8000: BR <FONT COLOR="DARK ORCHID">FE</FONT>
8002: NOP
8003: LDI 10
</pre>
Note that the branch has changed to FE and NOT FF as an extra byte could be deleted because the 3 byte long LBR is replace by a 2 byte long BR.
</p>
<h2>Chip 8, Chip 8X, Chip ETI, Chip Studio - Insert and Delete</h2>
<p>
If Chip 8 code is used within the program configuration that code will also be corrected by the insert and delete function. The following commands will be corrected:
<UL>
<LI>CALL aaa
<LI>JP aaa
<LI>JP V0, aaa (not in Chip 8X)
<LI>LD I,aaa
<LI>SYS aaa
</UL>
</p>
<h2>ST2 - Insert and Delete</h2>
<p>
If ST2 code is used within the program configuration that code will also be corrected by the insert and delete function. The following commands will be corrected:
<UL>
<LI>CALL aaa
<LI>DJNZ V0, kk
<LI>JNZ Vx, kk
<LI>JKP n, kk
<LI>JKP VB, kk
<LI>JP aaa
<LI>JZ Vx, kk
<LI>LD I,aaa
<LI>SP DRW, JC, kk (or SP DRW, kk)
<LI>SYS aaa
</UL>
</p>
<p>
Note: none of the short jumps within a page will be corrected if the insert or delete causes them to go outside of the page. Instead the address of the jump will be listed in the message area.
</p>
<h2>ST4 - Insert and Delete</h2>
<p>
If ST4 code is used within the program configuration that code will also be corrected by the insert and delete function. The following commands will be corrected:
<UL>
<LI>CALL 6kk
<LI>CALL 7kk
<LI>CALL 8kk
<LI>CALL 10kk
<LI>CALL 11kk
<LI>JP kk
<LI>JNZ Vx, kk
<LI>JZ Vx, kk
<LI>LD I, 0aaa
<LI>LD I, 2aaa
<LI>LD I, 3aaa
<LI>LD I, 4aaa
</UL>
</p>
<p>
Note that if a CALL will change to an addres outside hex 600-8FF or hex 1000-11FF address ranges, the command itself will change as the pseudo code will change to 65kk, 69kk, 0Fkk or 12kk. LD I instructions will change within a range of hex 0FFF, so LI I, 0aaa will not change outside 0aaa range.
</p>
<h2>Coin Bowling, FEL - Insert and Delete</h2>
<p>
If Coin Bowling, Computer Bowlinfg or FEL code is used within the program configuration that code will also be corrected by the insert and delete function. The following commands will be corrected:
<UL>
<LI>CALL aaa
<LI>JP aaa
<LI>JNK Vx, kk (Computer Bowling only)
<LI>SYS aaa
</UL>
</p>
<h2>GPL I, GPL II - Insert and Delete</h2>
<p>
If GPL I or GPL II code is used within the program configuration that code will also be corrected by the insert and delete function. The following commands will be corrected:
<UL>
<LI>CALL aaa
<LI>JP aaa
<LI>LD [6aa], Vx
<LI>SE Vx, [6aa] (GPL I only)
<LI>SNE Vx, [6aa]
<LI>SYS aaa
</UL>
<p>
Note: none of the short [6aa] references within page 6 will be corrected if the insert or delete causes them to go outside of the page. Instead the address of the instruction will be listed in the message area.
</p>
<h2>FPL - Insert and Delete</h2>
<p>
If FPL code is used within the program configuration that code will also be corrected by the insert and delete function. The following commands will be corrected:
<UL>
<LI>CALL aaa
<LI>JP aaa
<LI>LD [6aa], Vx
<LI>SYS aaa
</UL>
<p>
Note: none of the short [6aa] references within page 6 will be corrected if the insert or delete causes them to go outside of the page. Instead the address of the instruction will be listed in the message area.
</p>
<h2>Scramble, Swords - Insert and Delete</h2>
<p>
If Scramble or Swords code is used within the program configuration that code will also be corrected by the insert and delete function. The following commands will be corrected:
<UL>
<LI>CALL aaa
<LI>JNZ V0, aaa
<LI>JP aaa
<LI>JP FIREA, kk
<LI>JP FIREB, kk
<LI>JP 'EF3', kk
<LI>JP COIN, kk
<LI>JZ V0, aaa
<LI>SYS aaa
</UL>
</p>
</body>
</html>